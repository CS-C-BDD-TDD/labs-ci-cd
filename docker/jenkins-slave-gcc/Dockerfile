FROM openshift3/jenkins-slave-base-rhel7:latest

USER root

ENV INSTALL_PKGS="gdb valgrind vim gcc-g++ libstdc++ libstdc++-devel make automake autoconf OpenIPMI OpenIPMI-libs OpenIPMI-modalias fence-agents-ipmilan freeipmi freeipmi-bmc-watchdog freeipmi-ipmidetectd ipmitool OpenIPMI-devel-2.0.23-2.el7 freeipmi-devel-1.5.7-2.el7 cppunit cppunit-debuginfo cppunit-devel"

RUN yum repolist > /dev/null && \
    yum install -y --setopt=tsflags=nodocs \
      --enablerepo=rhel-7-server-extras-rpms \
      --enablerepo=rhel-7-server-satellite-tools-6.2-rpms
      --enablerepo=rhel-7-server-v2vwin-1-debug-rpms
      --enablerepo=rhel-7-server-insights-3-debug-rpms
      --enablerepo=rhel-7-server-openstack-11-tools-debug-rpms
      --enablerepo=rhel-server-rhscl-7-eus-source-rpms
      --enablerepo=rhel-ha-for-rhel-7-server-fastrack-rpms
      --enablerepo=rhel-7-server-rhceph-2-tools-rpms
      --enablerepo=rhel-7-server-extras-rpms
      --enablerepo=rhel-7-server-satellite-6.1-source-rpms
      --enablerepo=rhel-7-server-rhn-tools-beta-rpms
      --enablerepo=rhel-7-server-supplementary-debug-rpms
      --enablerepo=rhel-7-server-satellite-capsule-6.1-debug-rpms
      --enablerepo=rhel-7-server-satellite-tools-6.1-debug-rpms
      --enablerepo=rhel-server-rhscl-7-beta-source-rpms
      --enablerepo=rhel-7-server-satellite-capsule-optional-6.0-debug-rpms
      --enablerepo=rhel-7-server-satellite-capsule-6.2-source-rpms
      --enablerepo=rhel-7-server-openstack-7.0-tools-rpms
      --enablerepo=rhel-7-server-satellite-maintenance-6-debug-rpms
      --enablerepo=rhel-7-server-satellite-tools-6-puppet-upgrade-beta-rpms
      --enablerepo=rhel-7-server-satellite-6.0-debug-rpms
      --enablerepo=rhel-7-server-optional-beta-debug-rpms
      --enablerepo=rhel-7-server-openstack-12-tools-rpms
      --enablerepo=rh-gluster-3-client-for-rhel-7-server-debug-rpms
      --enablerepo=rhel-7-server-optional-fastrack-debug-rpms
      --enablerepo=rhel-server-7-satellite-capsule-6-puppet-upgrade-beta-source-rpms
      --enablerepo=rhel-7-server-satellite-tools-6.2-source-rpms
      --enablerepo=rhel-7-server-satellite-capsule-optional-6.0-rpms
      --enablerepo=rhel-7-server-openstack-9-tools-rpms
      --enablerepo=rhel-ha-for-rhel-7-server-fastrack-debug-rpms
      --enablerepo=rhel-7-server-satellite-tools-6.2-debug-rpms
      --enablerepo=rhel-7-server-supplementary-beta-source-rpms
      --enablerepo=rhel-7-server-openstack-8-tools-rpms
      --enablerepo=rhel-7-server-openstack-10-tools-debug-rpms
      --enablerepo=rhel-7-server-openstack-9-tools-source-rpms
      --enablerepo=rhel-7-server-openstack-10-tools-source-rpms
      --enablerepo=rhel-7-server-beta-rpms
      --enablerepo=rhel-7-server-optional-debug-rpms
      --enablerepo=rhel-ha-for-rhel-7-server-source-rpms
      --enablerepo=rhel-server-7-satellite-capsule-6-beta-source-rpms
      --enablerepo=rhel-7-server-rhceph-1.3-tools-debug-rpms
      --enablerepo=rhel-7-server-openstack-10-tools-rpms
      --enablerepo=rhel-server-rhscl-7-eus-debug-rpms
      --enablerepo=rhel-server-7-satellite-6-beta-source-rpms
      --enablerepo=rhel-7-server-satellite-capsule-6.2-rpms
      --enablerepo=rhel-7-server-extras-beta-debug-rpms
      --enablerepo=rhel-server-rhscl-7-rpms
      --enablerepo=rhel-7-server-rhn-tools-rpms
      --enablerepo=rhel-server-rhscl-7-beta-debug-rpms
      --enablerepo=rhel-7-server-satellite-capsule-6.0-rpms
      --enablerepo=rhel-7-server-rhceph-1.3-tools-source-rpms
      --enablerepo=rhel-7-server-fastrack-rpms
      --enablerepo=rhel-7-server-satellite-capsule-6.1-rpms
      --enablerepo=rhel-7-server-optional-fastrack-rpms
      --enablerepo=rhel-7-server-satellite-tools-6-puppet-upgrade-beta-source-rpms
      --enablerepo=rhel-7-server-rhn-tools-beta-source-rpms
      --enablerepo=rhel-server-7-satellite-capsule-6-beta-rpms
      --enablerepo=rhel-7-server-source-rpms
      --enablerepo=rhel-7-server-extras-source-rpms
      --enablerepo=rhel-7-server-openstack-7.0-tools-debug-rpms
      --enablerepo=rhel-7-server-satellite-6.1-rpms
      --enablerepo=rhel-7-server-openstack-12-tools-debug-rpms
      --enablerepo=rhel-7-server-fastrack-debug-rpms
      --enablerepo=rhel-7-server-satellite-6.0-source-rpms
      --enablerepo=rhel-7-server-optional-source-rpms
      --enablerepo=rhel-7-server-satellite-capsule-6.0-source-rpms
      --enablerepo=rhel-7-server-rhn-tools-beta-debug-rpms
      --enablerepo=rhel-7-server-insights-3-rpms
      --enablerepo=rhel-server-rhscl-7-beta-rpms
      --enablerepo=rhel-server-7-satellite-capsule-6-puppet-upgrade-beta-rpms
      --enablerepo=rhel-7-server-satellite-maintenance-6-rpms
      --enablerepo=rhel-7-server-openstack-9-tools-debug-rpms
      --enablerepo=rhel-7-server-openstack-12-tools-source-rpms
      --enablerepo=rhel-7-server-satellite-tools-6-beta-source-rpms
      --enablerepo=rhel-7-server-v2vwin-1-rpms
      --enablerepo=rhel-7-server-extras-beta-source-rpms
      --enablerepo=rhel-server-7-satellite-6-beta-debug-rpms
      --enablerepo=rhel-7-server-openstack-11-tools-rpms
      --enablerepo=rhel-7-server-rhceph-2-tools-debug-rpms
      --enablerepo=rhel-7-server-rh-common-beta-rpms
      --enablerepo=rhel-server-rhscl-7-debug-rpms
      --enablerepo=rhel-7-server-insights-3-source-rpms
      --enablerepo=rhel-7-server-extras-debug-rpms
      --enablerepo=rhel-7-server-debug-rpms
      --enablerepo=rhel-server-rhscl-7-source-rpms
      --enablerepo=rhel-ha-for-rhel-7-server-beta-source-rpms
      --enablerepo=rhel-7-server-satellite-optional-6.0-debug-rpms
      --enablerepo=rhel-7-server-rh-common-rpms
      --enablerepo=rhel-7-server-satellite-tools-6-puppet-upgrade-beta-debug-rpms
      --enablerepo=rhel-7-server-satellite-6.2-debug-rpms
      --enablerepo=rhel-server-7-satellite-6-beta-rpms
      --enablerepo=rhel-7-server-satellite-tools-6.1-rpms
      --enablerepo=rhel-7-server-rh-common-debug-rpms
      --enablerepo=rhel-7-server-v2vwin-1-source-rpms
      --enablerepo=rhel-7-server-rh-common-beta-debug-rpms
      --enablerepo=rhel-server-7-satellite-6-puppet-upgrade-beta-source-rpms
      --enablerepo=rhel-7-server-rh-common-beta-source-rpms
      --enablerepo=rhel-7-server-fastrack-source-rpms
      --enablerepo=rhel-7-server-satellite-maintenance-6-source-rpms
      --enablerepo=rhel-7-server-satellite-optional-6.0-rpms
      --enablerepo=rhel-7-server-satellite-6.2-source-rpms
      --enablerepo=rhel-7-server-satellite-optional-6.0-source-rpms
      --enablerepo=rhel-7-server-supplementary-beta-rpms
      --enablerepo=rhel-7-server-satellite-capsule-6.0-debug-rpms
      --enablerepo=rhel-server-7-satellite-6-puppet-upgrade-beta-debug-rpms
      --enablerepo=rhel-7-server-rh-common-source-rpms
      --enablerepo=rhel-7-server-rhceph-2-tools-source-rpms
      --enablerepo=rhel-server-7-satellite-6-puppet-upgrade-beta-rpms
      --enablerepo=rhel-7-server-satellite-tools-6-beta-rpms
      --enablerepo=rhel-7-server-rhn-tools-debug-rpms
      --enablerepo=rhel-7-server-rpms
      --enablerepo=rhel-ha-for-rhel-7-server-rpms
      --enablerepo=rh-gluster-3-client-for-rhel-7-server-rpms
      --enablerepo=rhel-7-server-optional-beta-source-rpms
      --enablerepo=rhel-server-rhscl-7-eus-rpms
      --enablerepo=rhel-7-server-supplementary-beta-debug-rpms
      --enablerepo=rh-gluster-3-client-for-rhel-7-server-source-rpms
      --enablerepo=rhel-7-server-satellite-capsule-optional-6.0-source-rpms
      --enablerepo=rhel-ha-for-rhel-7-server-beta-debug-rpms
      --enablerepo=rhel-ha-for-rhel-7-server-beta-rpms
      --enablerepo=rhel-7-server-openstack-8-tools-source-rpms
      --enablerepo=rhel-server-7-satellite-capsule-6-puppet-upgrade-beta-debug-rpms
      --enablerepo=rhel-7-server-rhceph-1.3-tools-rpms
      --enablerepo=rhel-7-server-satellite-capsule-6.1-source-rpms
      --enablerepo=rhel-7-server-satellite-tools-6-beta-debug-rpms
      --enablerepo=rhel-7-server-openstack-8-tools-debug-rpms
      --enablerepo=rhel-7-server-satellite-tools-6.1-source-rpms
      --enablerepo=rhel-7-server-satellite-6.1-debug-rpms
      --enablerepo=rhel-7-server-extras-beta-rpms
      --enablerepo=rhel-7-server-satellite-capsule-6.2-debug-rpms
      --enablerepo=rhel-server-7-satellite-capsule-6-beta-debug-rpms
      --enablerepo=rhel-ha-for-rhel-7-server-fastrack-source-rpms
      --enablerepo=rhel-ha-for-rhel-7-server-debug-rpms
      --enablerepo=rhel-7-server-supplementary-rpms
      --enablerepo=rhel-7-server-openstack-11-tools-source-rpms
      --enablerepo=rhel-7-server-satellite-6.2-rpms
      --enablerepo=rhel-7-server-optional-rpms
      --enablerepo=rhel-7-server-satellite-6.0-rpms
      --enablerepo=rhel-7-server-beta-source-rpms
      --enablerepo=rhel-7-server-optional-fastrack-source-rpms
      --enablerepo=rhel-7-server-rhn-tools-source-rpms
      --enablerepo=rhel-7-server-supplementary-source-rpms
      --enablerepo=rhel-7-server-beta-debug-rpms
      --enablerepo=rhel-7-server-openstack-7.0-tools-source-rpms
      --enablerepo=rhel-7-server-optional-beta-rpms
      $INSTALL_PKGS && \
    rpm -V $INSTALL_PKGS && \
    yum clean all -y && \
    rm -rf /var/cache/yum

USER 1001
